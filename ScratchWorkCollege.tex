% Options for packages loaded elsewhere
% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother





\setlength{\emergencystretch}{3em} % prevent overfull lines

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}



 


\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={College Scratch},
  pdfauthor={Corbin B; Matthew W},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{College Scratch}
\author{Corbin B; Matthew W}
\date{}
\begin{document}
\maketitle


\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: package 'tidyverse' was built under R version 4.4.3
\end{verbatim}

\begin{verbatim}
Warning: package 'ggplot2' was built under R version 4.4.3
\end{verbatim}

\begin{verbatim}
-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --
v dplyr     1.1.4     v readr     2.1.5
v forcats   1.0.0     v stringr   1.5.1
v ggplot2   4.0.0     v tibble    3.2.1
v lubridate 1.9.4     v tidyr     1.3.1
v purrr     1.0.2     
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
i Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sal\_df }\OtherTok{\textless{}{-}}\NormalTok{ vroom}\SpecialCharTok{::}\FunctionTok{vroom}\NormalTok{(}\StringTok{"Salary.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 773 Columns: 4
-- Column specification --------------------------------------------------------
Delimiter: ","
chr (2): MajorCategory, Sex
dbl (2): Salary, GPA

i Use `spec()` to retrieve the full column specification for this data.
i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sal\_df }\OtherTok{\textless{}{-}}\NormalTok{ sal\_df }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{MajorCategory =} \FunctionTok{factor}\NormalTok{(MajorCategory),}
    \AttributeTok{Sex =} \FunctionTok{factor}\NormalTok{(Sex)}
\NormalTok{  )}

\NormalTok{sal\_lm}\OtherTok{\textless{}{-}}\FunctionTok{lm}\NormalTok{(Salary}\SpecialCharTok{\textasciitilde{}}\NormalTok{ .,sal\_df)}
\NormalTok{sal\_lm\_int\_GPA\_MAJ  }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(Salary }\SpecialCharTok{\textasciitilde{}}\NormalTok{ GPA }\SpecialCharTok{*}\NormalTok{ MajorCategory }\SpecialCharTok{+}\NormalTok{ Sex, }\AttributeTok{data =}\NormalTok{ sal\_df)}

\FunctionTok{head}\NormalTok{(sal\_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 4
  Salary MajorCategory               Sex     GPA
   <dbl> <fct>                       <fct> <dbl>
1 130000 Engineering                 M      3.77
2  84200 Communications & Journalism F      2.79
3  58000 Education                   F      3.79
4  95500 Business                    F      3.9 
5  68500 Communications & Journalism F      3.23
6 101000 Computers & Mathematics     F      3.72
\end{verbatim}

\subsection{Impact of GPA - Corbin}\label{impact-of-gpa---corbin}

\subsubsection{What impact, if any, does GPA have on salary? Do you
think students should be hyper-anxious about
grades?}\label{what-impact-if-any-does-gpa-have-on-salary-do-you-think-students-should-be-hyper-anxious-about-grades}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 1) Pull GPA beta (estimate) and p{-}value from the summary object}
\NormalTok{smry }\OtherTok{\textless{}{-}} \FunctionTok{summary}\NormalTok{(sal\_lm)}
\NormalTok{coef\_mat }\OtherTok{\textless{}{-}}\NormalTok{ smry}\SpecialCharTok{$}\NormalTok{coefficients}

\NormalTok{gpa\_estimate }\OtherTok{\textless{}{-}}\NormalTok{ coef\_mat[}\StringTok{"GPA"}\NormalTok{, }\StringTok{"Estimate"}\NormalTok{]}
\NormalTok{gpa\_pvalue   }\OtherTok{\textless{}{-}}\NormalTok{ coef\_mat[}\StringTok{"GPA"}\NormalTok{, }\StringTok{"Pr(\textgreater{}|t|)"}\NormalTok{]}

\CommentTok{\# 2) Confidence interval (default 95\%)}
\NormalTok{gpa\_ci }\OtherTok{\textless{}{-}} \FunctionTok{confint}\NormalTok{(sal\_lm, }\StringTok{"GPA"}\NormalTok{, }\AttributeTok{level =} \FloatTok{0.95}\NormalTok{)}

\CommentTok{\# Print nicely}
\FunctionTok{cat}\NormalTok{(}\StringTok{"GPA beta (Estimate):"}\NormalTok{, }\FunctionTok{round}\NormalTok{(gpa\_estimate, }\DecValTok{4}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
GPA beta (Estimate): 5398.052 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"GPA p{-}value        :"}\NormalTok{, }\FunctionTok{signif}\NormalTok{(gpa\_pvalue, }\DecValTok{4}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
GPA p-value        : 6.524e-45 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"GPA 95\% CI         : ["}\NormalTok{,}
    \FunctionTok{round}\NormalTok{(gpa\_ci[}\DecValTok{1}\NormalTok{], }\DecValTok{4}\NormalTok{), }\StringTok{", "}\NormalTok{, }\FunctionTok{round}\NormalTok{(gpa\_ci[}\DecValTok{2}\NormalTok{], }\DecValTok{4}\NormalTok{), }\StringTok{"]}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
GPA 95% CI         : [4693.478, 6102.626]
\end{verbatim}

\subsubsection{Is the effect of GPA different for different majors (does
GPA matter more for some majors than
others)?.}\label{is-the-effect-of-gpa-different-for-different-majors-does-gpa-matter-more-for-some-majors-than-others.}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Helper: per{-}major GPA effects (beta, p, 95\% CI), no SE/stat printed}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{per\_major\_gpa\_effects }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(model, }\AttributeTok{major\_var =} \StringTok{"MajorCategory"}\NormalTok{, }\AttributeTok{gpa\_var =} \StringTok{"GPA"}\NormalTok{, }\AttributeTok{level =} \FloatTok{0.95}\NormalTok{) \{}
\NormalTok{  sm   }\OtherTok{\textless{}{-}} \FunctionTok{summary}\NormalTok{(model)}
\NormalTok{  cf   }\OtherTok{\textless{}{-}}\NormalTok{ sm}\SpecialCharTok{$}\NormalTok{coefficients}
\NormalTok{  V    }\OtherTok{\textless{}{-}} \FunctionTok{vcov}\NormalTok{(model)}
\NormalTok{  levs }\OtherTok{\textless{}{-}} \FunctionTok{levels}\NormalTok{(model}\SpecialCharTok{$}\NormalTok{model[[major\_var]])}
\NormalTok{  ref  }\OtherTok{\textless{}{-}}\NormalTok{ levs[}\DecValTok{1}\NormalTok{]  }\CommentTok{\# reference level}

\NormalTok{  term\_gpa }\OtherTok{\textless{}{-}}\NormalTok{ gpa\_var}
\NormalTok{  out }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{()}

  \CommentTok{\# Baseline (reference major)}
\NormalTok{  est\_ref }\OtherTok{\textless{}{-}}\NormalTok{ cf[term\_gpa, }\StringTok{"Estimate"}\NormalTok{]}
\NormalTok{  se\_ref  }\OtherTok{\textless{}{-}}\NormalTok{ cf[term\_gpa, }\StringTok{"Std. Error"}\NormalTok{]}
\NormalTok{  p\_ref   }\OtherTok{\textless{}{-}}\NormalTok{ cf[term\_gpa, }\StringTok{"Pr(\textgreater{}|t|)"}\NormalTok{]}

\NormalTok{  alpha }\OtherTok{\textless{}{-}} \DecValTok{1} \SpecialCharTok{{-}}\NormalTok{ level}
\NormalTok{  tcrit }\OtherTok{\textless{}{-}} \FunctionTok{qt}\NormalTok{(}\DecValTok{1} \SpecialCharTok{{-}}\NormalTok{ alpha}\SpecialCharTok{/}\DecValTok{2}\NormalTok{, }\AttributeTok{df =}\NormalTok{ sm}\SpecialCharTok{$}\NormalTok{df[}\DecValTok{2}\NormalTok{])}
\NormalTok{  ci\_ref }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(est\_ref }\SpecialCharTok{{-}}\NormalTok{ tcrit }\SpecialCharTok{*}\NormalTok{ se\_ref, est\_ref }\SpecialCharTok{+}\NormalTok{ tcrit }\SpecialCharTok{*}\NormalTok{ se\_ref)}

\NormalTok{  out[[ref]] }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
    \AttributeTok{MajorCategory =}\NormalTok{ ref,}
    \AttributeTok{estimate      =}\NormalTok{ est\_ref,}
    \AttributeTok{p\_value       =}\NormalTok{ p\_ref,}
    \AttributeTok{conf\_low      =}\NormalTok{ ci\_ref[}\DecValTok{1}\NormalTok{],}
    \AttributeTok{conf\_high     =}\NormalTok{ ci\_ref[}\DecValTok{2}\NormalTok{]}
\NormalTok{  )}

  \CommentTok{\# Non{-}reference majors: slope = beta\_GPA + beta\_interaction}
  \ControlFlowTok{for}\NormalTok{ (k }\ControlFlowTok{in}\NormalTok{ levs[}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{]) \{}
\NormalTok{    ti1 }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(gpa\_var, }\StringTok{":"}\NormalTok{, major\_var, k)}
\NormalTok{    ti2 }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(major\_var, k, }\StringTok{":"}\NormalTok{, gpa\_var)}
\NormalTok{    ti  }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(ti1, ti2)[}\FunctionTok{c}\NormalTok{(ti1, ti2) }\SpecialCharTok{\%in\%} \FunctionTok{rownames}\NormalTok{(cf)][}\DecValTok{1}\NormalTok{]}
    \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.na}\NormalTok{(ti)) }\ControlFlowTok{next}

\NormalTok{    est }\OtherTok{\textless{}{-}}\NormalTok{ cf[term\_gpa, }\StringTok{"Estimate"}\NormalTok{] }\SpecialCharTok{+}\NormalTok{ cf[ti, }\StringTok{"Estimate"}\NormalTok{]}
\NormalTok{    var\_ }\OtherTok{\textless{}{-}}\NormalTok{ V[term\_gpa, term\_gpa] }\SpecialCharTok{+}\NormalTok{ V[ti, ti] }\SpecialCharTok{+} \DecValTok{2} \SpecialCharTok{*}\NormalTok{ V[term\_gpa, ti]}
\NormalTok{    se   }\OtherTok{\textless{}{-}} \FunctionTok{sqrt}\NormalTok{(var\_)}
\NormalTok{    tval }\OtherTok{\textless{}{-}}\NormalTok{ est }\SpecialCharTok{/}\NormalTok{ se}
\NormalTok{    pval }\OtherTok{\textless{}{-}} \DecValTok{2} \SpecialCharTok{*} \FunctionTok{pt}\NormalTok{(}\FunctionTok{abs}\NormalTok{(tval), }\AttributeTok{df =}\NormalTok{ sm}\SpecialCharTok{$}\NormalTok{df[}\DecValTok{2}\NormalTok{], }\AttributeTok{lower.tail =} \ConstantTok{FALSE}\NormalTok{)}
\NormalTok{    ci   }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(est }\SpecialCharTok{{-}}\NormalTok{ tcrit }\SpecialCharTok{*}\NormalTok{ se, est }\SpecialCharTok{+}\NormalTok{ tcrit }\SpecialCharTok{*}\NormalTok{ se)}

\NormalTok{    out[[k]] }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
      \AttributeTok{MajorCategory =}\NormalTok{ k,}
      \AttributeTok{estimate      =}\NormalTok{ est,}
      \AttributeTok{p\_value       =}\NormalTok{ pval,}
      \AttributeTok{conf\_low      =}\NormalTok{ ci[}\DecValTok{1}\NormalTok{],}
      \AttributeTok{conf\_high     =}\NormalTok{ ci[}\DecValTok{2}\NormalTok{]}
\NormalTok{    )}
\NormalTok{  \}}

  \FunctionTok{bind\_rows}\NormalTok{(out) }\SpecialCharTok{|\textgreater{}}
    \FunctionTok{arrange}\NormalTok{(MajorCategory)}
\NormalTok{\}}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# 1) Per{-}major GPA slopes (beta, p, CI)}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{gpa\_by\_major\_tbl }\OtherTok{\textless{}{-}} \FunctionTok{per\_major\_gpa\_effects}\NormalTok{(}
  \AttributeTok{model     =}\NormalTok{ sal\_lm\_int\_GPA\_MAJ,}
  \AttributeTok{major\_var =} \StringTok{"MajorCategory"}\NormalTok{,}
  \AttributeTok{gpa\_var   =} \StringTok{"GPA"}\NormalTok{,}
  \AttributeTok{level     =} \FloatTok{0.95}
\NormalTok{)}

\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{=== GPA slope within each MajorCategory (beta, p, 95\% CI) ===}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

=== GPA slope within each MajorCategory (beta, p, 95% CI) ===
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gpa\_by\_major\_tbl }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}
    \FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(estimate, conf\_low, conf\_high), }\SpecialCharTok{\textasciitilde{}}\FunctionTok{round}\NormalTok{(.x, }\DecValTok{3}\NormalTok{)),}
    \AttributeTok{p\_value =} \FunctionTok{signif}\NormalTok{(p\_value, }\DecValTok{3}\NormalTok{)}
\NormalTok{  ) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{print}\NormalTok{(}\AttributeTok{n =} \ConstantTok{Inf}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 16 x 5
   MajorCategory                       estimate  p_value conf_low conf_high
   <chr>                                  <dbl>    <dbl>    <dbl>     <dbl>
 1 Agriculture & Natural Resources       -3274. 4.43e- 1  -11639.     5092.
 2 Arts                                   3294. 6.61e- 2    -220.     6808.
 3 Biology & Life Science                 3807. 1.21e- 1   -1002.     8617.
 4 Business                               6680. 2.63e-18    5216.     8144.
 5 Communications & Journalism            5810. 1.79e- 8    3807.     7813.
 6 Computers & Mathematics                1954. 1.84e- 1    -930.     4838.
 7 Education                              4414. 1.04e- 5    2462.     6366.
 8 Engineering                            6405. 1.04e- 2    1509.    11300.
 9 Health                                 5134. 2.37e- 4    2406.     7862.
10 Humanities & Liberal Arts              2926. 2.77e- 2     322.     5530.
11 Industrial Arts & Consumer Services    9646. 7.07e- 7    5861.    13432.
12 Interdisciplinary                      -197. 9.59e- 1   -7754.     7360.
13 Law & Public Policy                    6827. 1.68e- 4    3284.    10370.
14 Physical Sciences                      5843. 3.98e- 2     273.    11413.
15 Psychology & Social Work               5972. 1.42e- 3    2310.     9633.
16 Social Science                         6883. 5.32e-10    4736.     9031.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# 2) Raw interaction terms (difference vs. reference major) + 95\% CI}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{sm\_int }\OtherTok{\textless{}{-}} \FunctionTok{summary}\NormalTok{(sal\_lm\_int\_GPA\_MAJ)}
\NormalTok{cf\_mat }\OtherTok{\textless{}{-}}\NormalTok{ sm\_int}\SpecialCharTok{$}\NormalTok{coefficients}
\NormalTok{ci\_all }\OtherTok{\textless{}{-}} \FunctionTok{confint}\NormalTok{(sal\_lm\_int\_GPA\_MAJ, }\AttributeTok{level =} \FloatTok{0.95}\NormalTok{)}

\NormalTok{interaction\_rows }\OtherTok{\textless{}{-}} \FunctionTok{rownames}\NormalTok{(cf\_mat)[}
  \FunctionTok{grepl}\NormalTok{(}\StringTok{"\^{}GPA:MajorCategory|\^{}MajorCategory.+:GPA$"}\NormalTok{, }\FunctionTok{rownames}\NormalTok{(cf\_mat))}
\NormalTok{]}

\NormalTok{interaction\_tbl }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{term      =}\NormalTok{ interaction\_rows,}
  \AttributeTok{estimate  =}\NormalTok{ cf\_mat[interaction\_rows, }\StringTok{"Estimate"}\NormalTok{],}
  \AttributeTok{p\_value   =}\NormalTok{ cf\_mat[interaction\_rows, }\StringTok{"Pr(\textgreater{}|t|)"}\NormalTok{],}
  \AttributeTok{conf\_low  =}\NormalTok{ ci\_all[interaction\_rows, }\DecValTok{1}\NormalTok{],}
  \AttributeTok{conf\_high =}\NormalTok{ ci\_all[interaction\_rows, }\DecValTok{2}\NormalTok{]}
\NormalTok{) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(term)}

\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{=== Interaction terms: difference in GPA slope vs. reference major ===}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

=== Interaction terms: difference in GPA slope vs. reference major ===
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{interaction\_tbl }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}
    \FunctionTok{across}\NormalTok{(}\FunctionTok{c}\NormalTok{(estimate, conf\_low, conf\_high), }\SpecialCharTok{\textasciitilde{}}\FunctionTok{round}\NormalTok{(.x, }\DecValTok{3}\NormalTok{)),}
    \AttributeTok{p\_value =} \FunctionTok{signif}\NormalTok{(p\_value, }\DecValTok{3}\NormalTok{)}
\NormalTok{  ) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{print}\NormalTok{(}\AttributeTok{n =} \ConstantTok{Inf}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 15 x 5
   term                                      estimate p_value conf_low conf_high
   <chr>                                        <dbl>   <dbl>    <dbl>     <dbl>
 1 GPA:MajorCategoryArts                        6568. 0.155   -2499.      15635.
 2 GPA:MajorCategoryBiology & Life Science      7081. 0.15    -2572.      16734.
 3 GPA:MajorCategoryBusiness                    9954. 0.0217   1460.      18448.
 4 GPA:MajorCategoryCommunications & Journa~    9084. 0.0385    481.      17687.
 5 GPA:MajorCategoryComputers & Mathematics     5228. 0.247   -3628.      14083.
 6 GPA:MajorCategoryEducation                   7688. 0.0796   -910.      16285.
 7 GPA:MajorCategoryEngineering                 9678. 0.05       -2.01    19359.
 8 GPA:MajorCategoryHealth                      8408. 0.0611   -393.      17209.
 9 GPA:MajorCategoryHumanities & Liberal Ar~    6200. 0.166   -2572.      14972.
10 GPA:MajorCategoryIndustrial Arts & Consu~   12920. 0.00589  3737.      22103.
11 GPA:MajorCategoryInterdisciplinary           3076. 0.593   -8216.      14368.
12 GPA:MajorCategoryLaw & Public Policy        10101. 0.0295   1009.      19193.
13 GPA:MajorCategoryPhysical Sciences           9117. 0.0746   -906.      19140.
14 GPA:MajorCategoryPsychology & Social Work    9245. 0.0474    106.      18385.
15 GPA:MajorCategorySocial Science             10157. 0.0212   1525.      18790.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# 3) F{-}tests (does interaction improve fit?)}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{=== Nested model comparison (no interaction vs. with interaction) ===}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

=== Nested model comparison (no interaction vs. with interaction) ===
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(}\FunctionTok{anova}\NormalTok{(sal\_lm, sal\_lm\_int\_GPA\_MAJ))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Analysis of Variance Table

Model 1: Salary ~ MajorCategory + Sex + GPA
Model 2: Salary ~ GPA * MajorCategory + Sex
  Res.Df        RSS Df Sum of Sq      F  Pr(>F)  
1    755 2.4245e+10                              
2    740 2.3337e+10 15 908224530 1.9199 0.01864 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{=== Drop1 test (joint test of GPA:MajorCategory block) ===}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

=== Drop1 test (joint test of GPA:MajorCategory block) ===
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(}\FunctionTok{drop1}\NormalTok{(sal\_lm\_int\_GPA\_MAJ, }\AttributeTok{test =} \StringTok{"F"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Single term deletions

Model:
Salary ~ GPA * MajorCategory + Sex
                  Df  Sum of Sq        RSS   AIC  F value  Pr(>F)    
<none>                          2.3337e+10 13379                     
Sex                1 5537098395 2.8874e+10 13542 175.5776 < 2e-16 ***
GPA:MajorCategory 15  908224530 2.4245e+10 13379   1.9199 0.01864 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

\subsection{Salaries Across Majors}\label{salaries-across-majors}

\subsection{Salaries for Women and Men -
Corbin}\label{salaries-for-women-and-men---corbin}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sal\_lm\_sex\_major }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(}
\NormalTok{  Salary }\SpecialCharTok{\textasciitilde{}}\NormalTok{ GPA }\SpecialCharTok{+}\NormalTok{ Sex }\SpecialCharTok{*}\NormalTok{ MajorCategory,}
  \AttributeTok{data =}\NormalTok{ sal\_df}
\NormalTok{)}

\FunctionTok{summary}\NormalTok{(sal\_lm\_sex\_major)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = Salary ~ GPA + Sex * MajorCategory, data = sal_df)

Residuals:
     Min       1Q   Median       3Q      Max 
-15330.2  -3689.1    -53.2   3489.2  18510.3 

Coefficients:
                                                      Estimate Std. Error
(Intercept)                                            69947.5     2439.9
GPA                                                     5319.0      358.7
SexM                                                     922.1     3123.7
MajorCategoryArts                                     -19168.7     2434.1
MajorCategoryBiology & Life Science                    -9564.8     2827.2
MajorCategoryBusiness                                   1961.0     2208.9
MajorCategoryCommunications & Journalism               -8006.3     2242.3
MajorCategoryComputers & Mathematics                    9004.0     2434.2
MajorCategoryEducation                                -16776.1     2244.4
MajorCategoryEngineering                               23739.5     2541.9
MajorCategoryHealth                                     1744.9     2317.5
MajorCategoryHumanities & Liberal Arts                -12408.9     2409.6
MajorCategoryIndustrial Arts & Consumer Services       -7480.4     2764.4
MajorCategoryInterdisciplinary                        -17784.5     2998.7
MajorCategoryLaw & Public Policy                       -7001.5     2398.7
MajorCategoryPhysical Sciences                          6600.8     2630.5
MajorCategoryPsychology & Social Work                 -13469.2     2398.6
MajorCategorySocial Science                            -6142.5     2298.9
SexM:MajorCategoryArts                                  6671.5     3609.5
SexM:MajorCategoryBiology & Life Science                4575.9     4050.7
SexM:MajorCategoryBusiness                              7244.9     3247.0
SexM:MajorCategoryCommunications & Journalism           3798.8     3398.8
SexM:MajorCategoryComputers & Mathematics               3993.2     3599.8
SexM:MajorCategoryEducation                             3042.6     3390.3
SexM:MajorCategoryEngineering                           6482.1     3954.8
SexM:MajorCategoryHealth                                1859.3     3505.8
SexM:MajorCategoryHumanities & Liberal Arts             1974.6     3561.7
SexM:MajorCategoryIndustrial Arts & Consumer Services   6700.6     3873.6
SexM:MajorCategoryInterdisciplinary                     7805.5     4708.5
SexM:MajorCategoryLaw & Public Policy                   6372.2     3766.2
SexM:MajorCategoryPhysical Sciences                     5358.7     3818.3
SexM:MajorCategoryPsychology & Social Work              -284.8     3623.6
SexM:MajorCategorySocial Science                        5832.0     3393.8
                                                      t value Pr(>|t|)    
(Intercept)                                            28.668  < 2e-16 ***
GPA                                                    14.830  < 2e-16 ***
SexM                                                    0.295 0.767939    
MajorCategoryArts                                      -7.875 1.21e-14 ***
MajorCategoryBiology & Life Science                    -3.383 0.000754 ***
MajorCategoryBusiness                                   0.888 0.374942    
MajorCategoryCommunications & Journalism               -3.571 0.000379 ***
MajorCategoryComputers & Mathematics                    3.699 0.000233 ***
MajorCategoryEducation                                 -7.475 2.19e-13 ***
MajorCategoryEngineering                                9.339  < 2e-16 ***
MajorCategoryHealth                                     0.753 0.451729    
MajorCategoryHumanities & Liberal Arts                 -5.150 3.35e-07 ***
MajorCategoryIndustrial Arts & Consumer Services       -2.706 0.006968 ** 
MajorCategoryInterdisciplinary                         -5.931 4.63e-09 ***
MajorCategoryLaw & Public Policy                       -2.919 0.003620 ** 
MajorCategoryPhysical Sciences                          2.509 0.012309 *  
MajorCategoryPsychology & Social Work                  -5.615 2.77e-08 ***
MajorCategorySocial Science                            -2.672 0.007708 ** 
SexM:MajorCategoryArts                                  1.848 0.064952 .  
SexM:MajorCategoryBiology & Life Science                1.130 0.258986    
SexM:MajorCategoryBusiness                              2.231 0.025962 *  
SexM:MajorCategoryCommunications & Journalism           1.118 0.264061    
SexM:MajorCategoryComputers & Mathematics               1.109 0.267664    
SexM:MajorCategoryEducation                             0.897 0.369770    
SexM:MajorCategoryEngineering                           1.639 0.101632    
SexM:MajorCategoryHealth                                0.530 0.596038    
SexM:MajorCategoryHumanities & Liberal Arts             0.554 0.579476    
SexM:MajorCategoryIndustrial Arts & Consumer Services   1.730 0.084076 .  
SexM:MajorCategoryInterdisciplinary                     1.658 0.097791 .  
SexM:MajorCategoryLaw & Public Policy                   1.692 0.091074 .  
SexM:MajorCategoryPhysical Sciences                     1.403 0.160907    
SexM:MajorCategoryPsychology & Social Work             -0.079 0.937372    
SexM:MajorCategorySocial Science                        1.718 0.086134 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5609 on 740 degrees of freedom
Multiple R-squared:  0.7939,    Adjusted R-squared:  0.785 
F-statistic:  89.1 on 32 and 740 DF,  p-value: < 2.2e-16
\end{verbatim}

\subsection{Other Factors}\label{other-factors}




\end{document}
